import{c as w,r as N,u as y,b as v,j as e}from"./index-D1Y5wVUw.js";import{u as L,F as S,a as d,b as m,c as x,d as u,e as h,z as o,t as F}from"./form-BrS1Tf4e.js";import{C as k,b as C,c as I,a as P}from"./card-CD_rEnQT.js";import{U,B as j}from"./button-DIM2K2Cq.js";import{I as p}from"./label-Dha4I_Vm.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=w("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),E=o.object({username:o.string().min(1,"Username is required"),password:o.string().min(1,"Password is required")});function J(){const[i,c]=N.useState(!1),[T,l]=y(),{toast:a}=v(),t=L({resolver:F(E),defaultValues:{username:"",password:""}}),g=async s=>{c(!0);try{const r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await r.json();if(r.ok&&n.success){a({title:"Success",description:"Logged in successfully"}),localStorage.setItem("user",JSON.stringify(n.user));const b=new URLSearchParams(window.location.search).get("from")||"/admin";l(b)}else a({title:"Login Failed",description:n.error||"Invalid credentials",variant:"destructive"})}catch(r){console.error("Login error:",r),a({title:"Error",description:"Login failed. Please try again.",variant:"destructive"})}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2","data-testid":"text-login-title",children:"Supreme Fabrics"}),e.jsx("p",{className:"text-muted-foreground","data-testid":"text-login-subtitle",children:"Admin Portal Access"})]}),e.jsxs(k,{children:[e.jsx(C,{className:"text-center",children:e.jsxs(I,{className:"flex items-center justify-center gap-2","data-testid":"text-form-title",children:[e.jsx(f,{className:"h-5 w-5"}),"Admin Login"]})}),e.jsxs(P,{children:[e.jsx(S,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(g),className:"space-y-6",children:[e.jsx(d,{control:t.control,name:"username",render:({field:s})=>e.jsxs(m,{children:[e.jsx(x,{children:"Username"}),e.jsx(u,{children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(p,{placeholder:"Enter username",className:"pl-10","data-testid":"input-username",...s})]})}),e.jsx(h,{})]})}),e.jsx(d,{control:t.control,name:"password",render:({field:s})=>e.jsxs(m,{children:[e.jsx(x,{children:"Password"}),e.jsx(u,{children:e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(p,{type:"password",placeholder:"Enter password",className:"pl-10","data-testid":"input-password",...s})]})}),e.jsx(h,{})]})}),e.jsx(j,{type:"submit",className:"w-full",disabled:i,"data-testid":"button-login",children:i?"Signing in...":"Sign In"})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-muted/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:"Demo Credentials:"}),e.jsxs("p",{className:"text-sm text-center font-mono",children:[e.jsx("strong",{children:"Username:"})," admin",e.jsx("br",{}),e.jsx("strong",{children:"Password:"})," password"]})]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(j,{variant:"ghost",onClick:()=>l("/"),"data-testid":"link-back-home",children:"← Back to Website"})})]})})}export{J as default};
